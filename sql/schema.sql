CREATE TABLE ntp (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, UNIQUE INDEX UNIQ_A65EF2F65E237E06 (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE mest (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, UNIQUE INDEX UNIQ_F56E66195E237E06 (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE selected_land (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, land_id INT DEFAULT NULL, area DOUBLE PRECISION NOT NULL, price DOUBLE PRECISION NOT NULL, INDEX IDX_E1A3D8C0A76ED395 (user_id), INDEX IDX_E1A3D8C01994904A (land_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE doc (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE lands (id INT AUTO_INCREMENT NOT NULL, doc_id INT DEFAULT NULL, mest_id INT DEFAULT NULL, zem_id INT DEFAULT NULL, ntp_id INT DEFAULT NULL, kat_id INT DEFAULT NULL, num VARCHAR(255) NOT NULL, area DOUBLE PRECISION NOT NULL, status VARCHAR(255) DEFAULT NULL, INDEX IDX_93AE9538895648BC (doc_id), INDEX IDX_93AE9538EC1BDD44 (mest_id), INDEX IDX_93AE95381AE544C5 (zem_id), INDEX IDX_93AE95387D513538 (ntp_id), INDEX IDX_93AE9538AFE2B2E (kat_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE comments (id INT AUTO_INCREMENT NOT NULL, land_id INT DEFAULT NULL, Comment LONGTEXT NOT NULL, UNIQUE INDEX UNIQ_5F9E962A1994904A (land_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE contur (id INT AUTO_INCREMENT NOT NULL, cad_id INT DEFAULT NULL, Type INT NOT NULL, Number VARCHAR(255) NOT NULL, X DOUBLE PRECISION NOT NULL, Y DOUBLE PRECISION NOT NULL, INDEX IDX_4082E1D4B6B4FEDC (cad_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE kat (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, UNIQUE INDEX UNIQ_904D12105E237E06 (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE application_settings (id INT AUTO_INCREMENT NOT NULL, agro_year DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE user (id INT AUTO_INCREMENT NOT NULL, username VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, position VARCHAR(255) NOT NULL, roles VARCHAR(255) NOT NULL, UNIQUE INDEX UNIQ_8D93D649F85E0677 (username), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE point (id INT AUTO_INCREMENT NOT NULL, line_id INT DEFAULT NULL, cad_id INT DEFAULT NULL, Type INT NOT NULL, Number VARCHAR(255) NOT NULL, X DOUBLE PRECISION NOT NULL, Y DOUBLE PRECISION NOT NULL, Z VARCHAR(255) NOT NULL, INDEX IDX_B7A5F3244D7B7542 (line_id), INDEX IDX_B7A5F324B6B4FEDC (cad_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE new_contracts (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, examiner_id INT DEFAULT NULL, holder_id INT DEFAULT NULL, type VARCHAR(255) DEFAULT NULL, application VARCHAR(255) DEFAULT NULL, resheniq VARCHAR(255) DEFAULT NULL, reason VARCHAR(255) DEFAULT NULL, expire DATETIME DEFAULT NULL, start DATETIME DEFAULT NULL, neighbours LONGTEXT DEFAULT NULL COMMENT '(DC2Type:array)', contract_id_for_annex_only INT DEFAULT NULL, contract_id_for_edit INT DEFAULT NULL, UNIQUE INDEX UNIQ_3BCFAC1CA76ED395 (user_id), INDEX IDX_3BCFAC1C8A588563 (examiner_id), INDEX IDX_3BCFAC1CDEEE62D0 (holder_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE new_contracts_examiners (new_contracts_id INT NOT NULL, examiners_id INT NOT NULL, INDEX IDX_B85DB3307A14B3DB (new_contracts_id), INDEX IDX_B85DB3303340D542 (examiners_id), PRIMARY KEY(new_contracts_id, examiners_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE examiners (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, position VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE cad (id INT AUTO_INCREMENT NOT NULL, Version VARCHAR(255) NOT NULL, Ekatte INT NOT NULL, Name VARCHAR(255) NOT NULL, Window VARCHAR(255) NOT NULL, Reference VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE mayors (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, EGN VARCHAR(255) NOT NULL, status TINYINT(1) NOT NULL, UNIQUE INDEX UNIQ_2043BB23A74C236C (EGN), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE holders (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, EGN VARCHAR(255) NOT NULL, addres VARCHAR(255) NOT NULL, UNIQUE INDEX UNIQ_AE08A852A74C236C (EGN), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE used_area (id INT AUTO_INCREMENT NOT NULL, land_id INT DEFAULT NULL, contract_id INT DEFAULT NULL, area DOUBLE PRECISION NOT NULL, price DOUBLE PRECISION NOT NULL, active INT NOT NULL, INDEX IDX_789A90271994904A (land_id), INDEX IDX_789A90272576E0FD (contract_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE line (id INT AUTO_INCREMENT NOT NULL, contur_id INT DEFAULT NULL, cad_id INT DEFAULT NULL, Type INT NOT NULL, Number INT NOT NULL, BorderType INT NOT NULL, INDEX IDX_D114B4F6A812783D (contur_id), INDEX IDX_D114B4F6B6B4FEDC (cad_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE contracts (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, examiner_id INT DEFAULT NULL, holder_id INT DEFAULT NULL, mayor_id INT DEFAULT NULL, num VARCHAR(255) DEFAULT NULL, type INT DEFAULT NULL, status INT DEFAULT NULL, docFile VARCHAR(255) DEFAULT NULL, reason VARCHAR(255) DEFAULT NULL, application VARCHAR(255) NOT NULL, resheniq VARCHAR(255) NOT NULL, date DATETIME NOT NULL, start DATETIME DEFAULT NULL, expire DATETIME NOT NULL, neighbours LONGTEXT DEFAULT NULL COMMENT '(DC2Type:array)', annex_contract_id INT DEFAULT NULL, INDEX IDX_950A973A76ED395 (user_id), INDEX IDX_950A9738A588563 (examiner_id), INDEX IDX_950A973DEEE62D0 (holder_id), INDEX IDX_950A9736C74E5F2 (mayor_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE contracts_examiners (contracts_id INT NOT NULL, examiners_id INT NOT NULL, INDEX IDX_1B7ABBA424584564 (contracts_id), INDEX IDX_1B7ABBA43340D542 (examiners_id), PRIMARY KEY(contracts_id, examiners_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE zem (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(255) NOT NULL, UNIQUE INDEX UNIQ_8DAEB6935E237E06 (name), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE selected_land ADD CONSTRAINT FK_E1A3D8C0A76ED395 FOREIGN KEY (user_id) REFERENCES user (id);
ALTER TABLE selected_land ADD CONSTRAINT FK_E1A3D8C01994904A FOREIGN KEY (land_id) REFERENCES lands (id);
ALTER TABLE lands ADD CONSTRAINT FK_93AE9538895648BC FOREIGN KEY (doc_id) REFERENCES doc (id);
ALTER TABLE lands ADD CONSTRAINT FK_93AE9538EC1BDD44 FOREIGN KEY (mest_id) REFERENCES mest (id);
ALTER TABLE lands ADD CONSTRAINT FK_93AE95381AE544C5 FOREIGN KEY (zem_id) REFERENCES zem (id);
ALTER TABLE lands ADD CONSTRAINT FK_93AE95387D513538 FOREIGN KEY (ntp_id) REFERENCES ntp (id);
ALTER TABLE lands ADD CONSTRAINT FK_93AE9538AFE2B2E FOREIGN KEY (kat_id) REFERENCES kat (id);
ALTER TABLE comments ADD CONSTRAINT FK_5F9E962A1994904A FOREIGN KEY (land_id) REFERENCES lands (id);
ALTER TABLE contur ADD CONSTRAINT FK_4082E1D4B6B4FEDC FOREIGN KEY (cad_id) REFERENCES cad (id);
ALTER TABLE point ADD CONSTRAINT FK_B7A5F3244D7B7542 FOREIGN KEY (line_id) REFERENCES line (id);
ALTER TABLE point ADD CONSTRAINT FK_B7A5F324B6B4FEDC FOREIGN KEY (cad_id) REFERENCES cad (id);
ALTER TABLE new_contracts ADD CONSTRAINT FK_3BCFAC1CA76ED395 FOREIGN KEY (user_id) REFERENCES user (id);
ALTER TABLE new_contracts ADD CONSTRAINT FK_3BCFAC1C8A588563 FOREIGN KEY (examiner_id) REFERENCES examiners (id);
ALTER TABLE new_contracts ADD CONSTRAINT FK_3BCFAC1CDEEE62D0 FOREIGN KEY (holder_id) REFERENCES holders (id);
ALTER TABLE new_contracts_examiners ADD CONSTRAINT FK_B85DB3307A14B3DB FOREIGN KEY (new_contracts_id) REFERENCES new_contracts (id) ON DELETE CASCADE;
ALTER TABLE new_contracts_examiners ADD CONSTRAINT FK_B85DB3303340D542 FOREIGN KEY (examiners_id) REFERENCES examiners (id) ON DELETE CASCADE;
ALTER TABLE used_area ADD CONSTRAINT FK_789A90271994904A FOREIGN KEY (land_id) REFERENCES lands (id);
ALTER TABLE used_area ADD CONSTRAINT FK_789A90272576E0FD FOREIGN KEY (contract_id) REFERENCES contracts (id);
ALTER TABLE line ADD CONSTRAINT FK_D114B4F6A812783D FOREIGN KEY (contur_id) REFERENCES contur (id);
ALTER TABLE line ADD CONSTRAINT FK_D114B4F6B6B4FEDC FOREIGN KEY (cad_id) REFERENCES cad (id);
ALTER TABLE contracts ADD CONSTRAINT FK_950A973A76ED395 FOREIGN KEY (user_id) REFERENCES user (id);
ALTER TABLE contracts ADD CONSTRAINT FK_950A9738A588563 FOREIGN KEY (examiner_id) REFERENCES examiners (id);
ALTER TABLE contracts ADD CONSTRAINT FK_950A973DEEE62D0 FOREIGN KEY (holder_id) REFERENCES holders (id);
ALTER TABLE contracts ADD CONSTRAINT FK_950A9736C74E5F2 FOREIGN KEY (mayor_id) REFERENCES mayors (id);
ALTER TABLE contracts_examiners ADD CONSTRAINT FK_1B7ABBA424584564 FOREIGN KEY (contracts_id) REFERENCES contracts (id) ON DELETE CASCADE;
ALTER TABLE contracts_examiners ADD CONSTRAINT FK_1B7ABBA43340D542 FOREIGN KEY (examiners_id) REFERENCES examiners (id) ON DELETE CASCADE;
